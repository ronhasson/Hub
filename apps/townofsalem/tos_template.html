<template>

    <center>
        <h1></h1>
        <input type="button" value="Start!" />
        <div id="usersInGame">

        </div>
    </center>
    <script>
        var api = require("./apps/townofsalem/rolePicker.js")
        console.log(api.getRoles());
        requestChangeRemotePage("tos");
        var players = [];

        function addPlayer(uid) {
            var player = new Object();
            player.username = "";
            players[uid] = player;
        }

        function checkUserName(data) {
            for (let uid in players) {
                let player = players[uid]
                if (player.username == data.usr) {
                    sendEmit("requestUserNCallBack", {
                        flag: true,
                        usr: data.usr,
                        uid: data.uid
                    });
                    return false;
                }
            }
            players[data.uid].username = data.usr;
            sendEmit("requestUserNCallBack", {
                flag: false,
                usr: data.usr,
                uid: data.uid
            });
            displayUsers();
            console.log(players);
        }

        function displayUsers() {
            var disp = document.getElementById("usersInGame");
            disp.innerHTML = "";
            for (var uid in players) {
                let player = players[uid];
                if (player.username != "") {
                    disp.innerHTML += "<a class='playerWait' onclick='removePlayer(\"" + uid + "\")'>" + player.username + "</a></br>";
                }
            }
        }

        function removePlayer(uid) {
            players[uid].username = "";
            displayUsers();
        }
    </script>
</template>
