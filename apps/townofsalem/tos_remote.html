<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>TOS Remote</title>
    <meta id="addressbarColorAndroid" name="theme-color" content="#69019a">
    <meta id="addressbarColorIOS" name="apple-mobile-web-app-status-bar-style" content="#69019a">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
</head>

<body>
    <div id="start" >
        <center>
            <h1>Pick name!</h1>
            <input id="usernameInput" required />
            <input type="button" value="join" onclick="requestUsername()" />
            <br />
            <span id="error"></span>
        </center>
    </div>
    <div id="waiting" style="display:none">
        <h1 id="userView"></h1>
    </div>

    <div id="inGame" style="display:none" class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">ToS</span>
                <!-- Add spacer, to align navigation to the right -->
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation. We hide it in small screens. -->
                <nav class="mdl-navigation mdl-layout-">
                    <a class="mdl-navigation__link" href="">Will</a>
                    <a class="mdl-navigation__link" href="">DeathNote</a>
                    <a class="mdl-navigation__link" href="">Sun</a>
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer">
            <span class="mdl-layout-title">Name</span>
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link" href="">Chat</a>
                <a class="mdl-navigation__link" href="">Actions</a>
                <a class="mdl-navigation__link" href="">Role</a>
            </nav>
        </div>
        <main class="mdl-layout__content">
            <div class="page-content">sad
                <br>
                <br>
                <br>bla
                <br>
                <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>shitpost
                <br>
            </div>
        </main>
    </div>

</body>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
    var socket = io();
    var uid = guid();
    var username;

    socket.emit("join", uid);

    function requestUsername() {
        var TEMP_username = document.getElementById("usernameInput").value;
        socket.emit("requestUserN", {
            usr: TEMP_username,
            uid: uid
        });
    }
    socket.on('requestUserNCallBack', function(data) {
        if (!data.flag && uid == data.uid) {
            username = data.usr;
            document.getElementById("start").style.display = 'none';
            document.getElementById("waiting").style.display = '';
            document.getElementById("userView").innerHTML = "Hello " + username;
        }
        if (data.flag && uid == data.uid) {
            document.getElementById("error").innerHTML = "Darling, the username is unavailable ðŸ’ƒ";
        }
    });

    function sendButtonPress(button) {
        socket.emit('buttonPress', button);
    }

    socket.on('changePageRemote', function(page) {
        document.location.href = "/" + page;
    });

    function guid() {
        function s4() {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        }
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
            s4() + '-' + s4() + s4() + s4();
    }
</script>

</html>
